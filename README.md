# 3 - 4 - 5
Мы используем принципы DDD (Domain-Driven Design), выделяя ограниченные контексты
Идеальная архитектура стремится к высокой связанности внути и низкой снаружи сервиса
## Домены
- Пользователи (user service)
  Ответственность: Регистрация, аутентификация и управление профилями покупателей и продавцов
  Данные: Изолированная реляционная БД. Другие сервисы получают данные через API
- Каталог (catalog service)
  Ответственность: Управление ассортиментом для продавцов (добавление товара, цены, количества, остатки)
  Данные: Изолированная БД (Catalog DB)
- Заказы (order service)
  Ответственность: Оформление корзины, создание и трекинг статуса заказа
  Данные: Изолированная БД (Order DB)
- Платежи (payment service)
  Ответственность: Расчет сумм, интеграция с внешними платежными шлюзами, учет платежей
  Данные: Изолированная БД (Payment DB)
- Лента и рекомендации (feed service)
  Ответственность: Персонализированная выдача товаров
  Данные: Отдельная БД оптимизированная по чтение (NoSQL)
- Уведомления (notification service)
  Ответственность: Отправка пуш уведомлений, email пользователям
  Данные: Шаблоны уведомлений и логи отправок
## Взаимодействие сервисов
- Синхронное (немедленное подтверждение операции)
  - От API Gateway к сервисам
  - Order service -> Catalog service
  - Order service -> User service
  
- Асинхронное (повышение отказаустойчивости)
  - Order service после создания заказа побликует событие OrderCreated. Payment service и Notification service выступают консьюмерами
  
# 6 - 7 - 8
## Модульный монолит
Вся система разрабатывается как единный процесс, но внутри есть логичиские модули с четкими границами
Плюсы
- Простая разработка для одной небольшой команды
- Отсутствие сетевых задережек при взаимодействиях модулей, ведь вызовы происходят локально
- Нет проблем с распределенными транзакциями
Минусы
- Сложность масштабирования
- Плохая отказаустойчивость
- Отсутвие паралельной разработки
- Одна кодовая база

## Микросервесная архитектура
Система разбита на мелкие сфокусированные сервисы вокруг бизнес-доменов, каждый из которых разветывается независимо и владеет собственной базой данных
Плюсы
- Масштабирование
- Отказаустойчивость
- Сервисы могут быть написаны на разных языках и исп. разный БД
- Возможность параллельной разработки
Минусы
- Сложная разработка
- Необходимость решать проблемы консистентности данных в рапределенных транзакциях
- Стоимость

## Выбраный вариант - микросервесная архитектура
Маркетплейс предполагает разную нагрузку. Например, ленту товаров пользователи будут чаще использовать, чем регистрацию. Микросервисная архитектура позволяет независимо масштабировать высоконагруженные узлы. Также, появляется отказаустойчивость. При падении сервиса уведомлений маркетплейс будет продалжать работать. При выборе микросервесной архитектуры мы избиагем антипаттерна "Общая связанность" выделяя для каждого микросервиса свою БД, что гарантирует инкапсуляцию данных и независимость команд. Мы принимаем проблему в виде усложнения поддержки инфраструктуры ради высокой доступности и возможности параллельной разработки

